


* 接收分配内存
* 接收缓冲区
* 接收窗口
* 发送窗口
* 发送缓冲区
* 发送分配内存



zero window :

## SWS(Silly Window Syndrome)

原因:

缺点:

* 网络碎片(尤其对长连接)
* CPU 和 吞吐量的影响
*


解决办法:

1. 从调整窗口角度

接收方接受到小包, 将接受窗口调小, 等收到的数据到达一定量之后调大接受窗口

一定量该如何定义:

发送方通过比较发送窗口和接收窗口, 如果发送窗口/接受窗口小于一个特定的值(25%),
就停止发送数据(除非 PUSH, FIN).

2. 从应答角度

收到一个 segment 不立即应答, 并减少发送窗口大小. 通过一个定时器延迟应答.
这样做的目的就是将多个小包合并成一个打包, 提高网络吞吐量, 降低机器负载

其中: 所有包大小小于 50% 的可用空间

延迟应答在如下条件不成立:
* 在准备应答当前包时, 下一个收的包中包含 PUSH 标志
* 延迟时间达到.(防止重传)
* 一个接收窗口被缩小


重传时间计算

由于延迟应答的存在, RTT 的计算包含了延迟时间, 因此

RTT * ratio
